---
description: 'Comprehensive naming, placement, and semantic guide for Copilot Browser Agent'
applyTo: '**'
---

# Black-Tortoise Naming & Architecture Guide (Copilot Browser Agent Optimized)

> **Version**: 2.0 (Enhanced)
> **Last Updated**: 2026-02-03
> **Project**: Black-Tortoise (Angular 21+ / DDD / Firebase / Cloud Functions)
> **Optimized For**: Copilot Browser Agent - Format Rules + Semantic Decisions + Placement Guide

---

## ğŸ¯ Quick Decision Guide (Read Before Coding)

### Ask Yourself Three Questions:

1. **Where to write?** â†’ See "Semantic Decision Tree" (Section II)
2. **How to name?** â†’ See "Naming Format Rules" (Sections III-VII)
3. **Which technology?** â†’ See "Layer Technology Constraints" (Section VIII)

### Quick Query Index

**By Task**:

- ğŸ†• Where for new feature? â†’ [Section II: Semantic Decision Tree](#ii-semantic-decision-tree-code-placement)
- ğŸ“ How to name files? â†’ [Section III: Directory & File Rules](#iii-directory--file-rules-22-rules)
- ğŸ¨ How to name Class/Function? â†’ [Section IV: Code Entity Rules](#iv-code-entity-rules-11-rules)
- âš¡ Angular features? â†’ [Section VI: Angular 21+ Rules](#vi-angular-21-rules-6-rules)
- ğŸ”§ Backend rules? â†’ [Section VIII: Functions Layer Rules](#viii-functions-layer-rules-new)

**By Format**:

- **PascalCase**: Class, Interface, Type, Enum, Store, DTO, Mapper, Exception
- **camelCase**: Function, Method, Property, Variable, Directive selector, Pipe name
- **kebab-case**: Folder, File, Resource, Route, CSS class
- **SCREAMING_SNAKE_CASE**: Constant, Environment variable, Core files

---

## I. æ ¸å¿ƒåŸå‰‡ï¼ˆ4æ¢ï¼‰

1. æ‰€æœ‰å‘½åå¿…é ˆèªç¾©å„ªå…ˆï¼Œæè¿°ã€Œåšä»€éº¼ã€æˆ–ã€Œä»£è¡¨ä»€éº¼ã€ï¼Œè€Œéã€Œå¦‚ä½•åšã€
2. ç¦æ­¢ä½¿ç”¨ç¸®å¯«ï¼Œé™¤éæ˜¯æ¥­ç•Œå…¬èªç¸®å¯«ï¼ˆIDã€URLã€BIMã€WBSã€APIã€SDKï¼‰
3. ç›¸åŒæ¦‚å¿µåœ¨ä¸åŒå±¤ç´šï¼ˆDomain/Application/Presentationï¼‰å¿…é ˆä½¿ç”¨ç›¸åŒè¡“èª
4. æª”æ¡ˆåç¨±å¿…é ˆåŒ…å«DDDè§’è‰²æ¨™ç±¤ï¼ˆå¦‚ .voã€.entityã€.aggregateï¼‰

---

## II. èªæ„æ±ºç­–æ¨¹ï¼ˆCode Placementï¼‰

### ç¸½é«”åŸå‰‡ï¼ˆåŸºæ–¼ General Standard DDD.mdï¼‰

DDD æ¶æ§‹åˆ†ç‚º **8 å€‹ä¸»å±¤ç´š** å’Œ **å¤šå€‹å­å±¤**ã€‚å‘½åèˆ‡æ”¾ç½®å¿…é ˆå°æ‡‰å±¤ç´šè·è²¬ï¼š

- **app/core** = å…¨åŸŸåŸºç¤è¨­æ–½ â†’ å‘½ååæ˜ ã€ŒæŠ€è¡“èƒ½åŠ›ã€
- **app/domain** = é ˜åŸŸé‚è¼¯ â†’ å‘½ååæ˜ ã€Œæ¥­å‹™æ¦‚å¿µã€
- **app/application** = æ‡‰ç”¨å”èª¿ â†’ å‘½ååæ˜ ã€Œç”¨ä¾‹ã€
- **app/infrastructure** = æŠ€è¡“å¯¦ä½œ â†’ å‘½ååæ˜ ã€Œé©é…ã€
- **app/features** = UI è¡¨ç¾å±¤ â†’ å‘½ååæ˜ ã€Œç”¨æˆ¶æ“ä½œã€
- **app/shared** = é€šç”¨å·¥å…· â†’ å‘½ååæ˜ ã€Œå¯é‡ç”¨èƒ½åŠ›ã€
- **shared-kernel** = è·¨å±¤å…±äº« â†’ å‘½ååæ˜ ã€Œé€šç”¨æ¦‚å¿µã€
- **functions**ï¼ˆNode.jsï¼‰ = å¾Œç«¯ç„¡ä¼ºæœå™¨ â†’ å‘½ååæ˜ ã€Œæœå‹™ç«¯é‚è¼¯ã€

> **è¦å‰‡**: å¦‚æœä¸€å€‹å‡½æ•¸åç¨±ç„¡æ³•å›ç­”è©²å±¤ç´šçš„æ ¸å¿ƒå•é¡Œï¼Œå®ƒä¸€å®šæ”¾éŒ¯åœ°æ–¹ã€‚

---

### å±¤ç´šèˆ‡æ ¸å¿ƒå•é¡Œï¼ˆå°æ‡‰ DDD æ¶æ§‹ï¼‰

| å±¤ç´š                          | æ ¸å¿ƒå•é¡Œ                       | å…è¨±çš„å‡½æ•¸èªæ„                                    | ç¦æ­¢çš„å‡½æ•¸èªæ„                       |
| ----------------------------- | ------------------------------ | ------------------------------------------------- | ------------------------------------ |
| `app/core`                    | æ‡‰ç”¨åŸºç¤å¦‚ä½•åˆå§‹åŒ–ï¼Ÿ           | `init`, `setup`, `configure`, `provide`          | ä»»ä½•æ¥­å‹™é‚è¼¯                         |
| `app/domain/{bounded_context}`| é ˜åŸŸè¦å‰‡æ˜¯ä»€éº¼ï¼Ÿ               | `create`, `calculate`, `validate`, `determine`   | HTTP å‘¼å«ã€UI é‚è¼¯                   |
| `app/application/{module}`    | ç”¨ä¾‹å¦‚ä½•è¢«åŸ·è¡Œï¼Ÿ               | `execute`, `handle`, `process`                   | ç›´æ¥ä¿®æ”¹ UI ç‹€æ…‹                     |
| `app/infrastructure`          | å¦‚ä½•èˆ‡å¤–éƒ¨ç³»çµ±äº’å‹•ï¼Ÿ           | `save`, `fetch`, `send`, `connect`               | æ¥­å‹™æ±ºç­–ã€è¨ˆç®—é‚è¼¯                   |
| `app/features/{feature}`      | ç”¨æˆ¶å¦‚ä½•é€²è¡Œæ“ä½œï¼Ÿ             | `onAction`, `handleEvent`, `navigate`            | ç›´æ¥ API å‘¼å«ã€è¤‡é›œè¨ˆç®—               |
| `app/shared`                  | é€šç”¨èƒ½åŠ›æä¾›ä»€éº¼ï¼Ÿ             | `format`, `transform`, `validate`                | æ¥­å‹™èªæ„ã€æ¡†æ¶ç›¸é—œ                   |
| `shared-kernel`               | è·¨å±¤å…±äº«ä»€éº¼ï¼Ÿ                 | å¸¸é‡ã€å‹åˆ¥ã€åŸºç¤ä»‹é¢                             | å¯¦ä½œé‚è¼¯                             |
| `functions`ï¼ˆNode.jsï¼‰         | å¾Œç«¯æœå‹™åšä»€éº¼ï¼Ÿ               | `process`, `analyze`, `generate`, `validate`     | Angular ç›¸é—œç¨‹å¼ç¢¼                   |

---

### æ±ºç­–æµç¨‹åœ–ï¼ˆåŸºæ–¼ DDD å±¤ç´šï¼‰

```
æ–°åŠŸèƒ½/ä»£ç¢¼è¦æ”¾å“ªè£¡ï¼Ÿ
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯æ ¸å¿ƒé ˜åŸŸè¦å‰‡å—ï¼Ÿã€
â”‚  â””â”€ æ˜¯ â†’ app/domain/{bounded_context}/
â”‚     â””â”€ ä¸å«æ¡†æ¶ã€ä¸å« HTTPã€å¯ç¨ç«‹æ¸¬è©¦
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯æ‡‰ç”¨ç”¨ä¾‹çš„å”èª¿å—ï¼Ÿã€
â”‚  â””â”€ æ˜¯ â†’ app/application/{module}/use-cases/
â”‚     â””â”€ å« commandsã€queriesã€dtosã€mappers
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯æŠ€è¡“å¯¦ä½œå±¤å—ï¼Ÿã€
â”‚  â”œâ”€ æ˜¯ï¼Œä¸”åœ¨ **Browser** â†’ app/infrastructure/ (ä½¿ç”¨ @angular/fire)
â”‚  â””â”€ æ˜¯ï¼Œä¸”åœ¨ **Node.js** â†’ functions/src/infrastructure/
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯ç”¨æˆ¶ UI äº’å‹•å—ï¼Ÿã€
â”‚  â””â”€ æ˜¯ â†’ app/features/{feature_name}/
â”‚     â””â”€ å« pagesã€containersã€componentsã€models
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯æ‡‰ç”¨å•Ÿå‹•/å…¨åŸŸé…ç½®å—ï¼Ÿã€
â”‚  â””â”€ æ˜¯ â†’ app/core/
â”‚     â””â”€ å« authã€interceptorsã€providersã€error-handler
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯é€šç”¨å·¥å…·æˆ–åŸå­çµ„ä»¶å—ï¼Ÿã€
â”‚  â””â”€ æ˜¯ â†’ app/shared/
â”‚     â””â”€ å« uiã€directivesã€pipesã€utils
â”‚
â”œâ”€ å•ï¼šã€Œæ˜¯è·¨å±¤ç´šå…±äº«çš„å‹åˆ¥å—ï¼Ÿã€
â”‚  â””â”€ æ˜¯ â†’ shared-kernel/
â”‚     â””â”€ 100% Pure TSï¼Œç„¡æ¡†æ¶ä¾è³´
â”‚
â””â”€ å•ï¼šã€Œæ˜¯å¾Œç«¯ç„¡ä¼ºæœå™¨å‡½å¼å—ï¼Ÿã€
   â””â”€ æ˜¯ â†’ functions/src/
      â””â”€ å« interfacesã€applicationã€domainã€infrastructure
```

---

### å±¤ç´šæŠ€è¡“ç´„æŸï¼ˆé‡è¦ï¼‰

| å±¤ç´š                    | Runtime        | å…è¨±çš„ SDK                          | ç¦æ­¢çš„ SDK                                        |
| ----------------------- | -------------- | ----------------------------------- | ------------------------------------------------- |
| `shared-kernel/`        | ç´” TypeScript  | âŒ NO external deps                 | âœ… Pure TS + Type defs only                       |
| `app/shared/`           | Browser        | âš ï¸ Angular APIs only                | âŒ Firebase, HttpClient (ç”¨ injection)            |
| `app/domain/`           | ç´” TypeScript  | âŒ NO framework, NO HTTP            | âœ… Pure business logic                            |
| `app/application/`      | Browser        | âš ï¸ Dependency Injection             | âŒ Direct SDK calls                               |
| `app/infrastructure/`   | Browser        | âœ… @angular/fire, SDK clients       | âŒ firebase-admin, @google-cloud/*               |
| `app/features/`         | Browser        | âš ï¸ Angular Components / Signals     | âŒ Direct API calls (ç”¨ services)                 |
| `app/core/`             | Browser        | âœ… Angular, Firebase Admin (Auth)   | âŒ Business logic                                 |
| `functions/src/`        | Node.js (GCP)  | âœ… firebase-admin, @google-cloud/* | âŒ @angular/fire, Angular imports, Browser APIs  |

**é—œéµè¦å‰‡**:

- `shared-kernel/` = 100% Pure TypeScriptï¼Œé›¶å¤–éƒ¨ä¾è³´
- `app/domain/` = ç´”æ¥­å‹™é‚è¼¯ï¼Œæ¡†æ¶ç„¡é—œ
- `app/infrastructure/` = å®¢æˆ¶ç«¯SDKï¼ˆç”¨æˆ¶æ¬Šé™ï¼‰
- `functions/` = æœå‹™ç«¯SDKï¼ˆæå‡æ¬Šé™ã€Document AIã€Vertex AIï¼‰

---

## III. ç›®éŒ„èˆ‡æª”æ¡ˆè¦å‰‡ï¼ˆ22æ¢ï¼‰

### è³‡æ–™å¤¾å‘½å

5. æ‰€æœ‰è³‡æ–™å¤¾å¿…é ˆä½¿ç”¨ kebab-case å‘½å
   - âœ… æ­£ç¢ºï¼š`src/app/capabilitys/tasks/domain/value-objects/`
   - âŒ éŒ¯èª¤ï¼š`src/app/Capabilitys/Tasks/Domain/ValueObjects/`

### æª”æ¡ˆå‘½åæ ¼å¼

6. æ‰€æœ‰æª”æ¡ˆå¿…é ˆä½¿ç”¨ `kebab-case.{type}.ts` æ ¼å¼
   - æª”ååªä½¿ç”¨ã€Œåè©ã€ï¼Œä¸ä½¿ç”¨å‹•è©
   - æª”åå¿…é ˆèƒ½æ¨æ–·å…¶è²¬ä»»ï¼Œä¸ä¾è³´å…§å®¹è§£é‡‹

### æª”æ¡ˆé¡å‹å¾Œç¶´è¦å‰‡

7. å€¼ç‰©ä»¶æª”æ¡ˆå¿…é ˆä»¥ `.vo.ts` çµå°¾
8. å¯¦é«”æª”æ¡ˆå¿…é ˆä»¥ `.entity.ts` çµå°¾
9. èšåˆæ ¹æª”æ¡ˆå¿…é ˆä»¥ `.aggregate.ts` çµå°¾
10. å·¥å» æª”æ¡ˆå¿…é ˆä»¥ `.factory.ts` çµå°¾
11. å­˜å„²åº«æª”æ¡ˆå¿…é ˆä»¥ `.repository.ts` çµå°¾
12. åŸ /é©é…å™¨æª”æ¡ˆå¿…é ˆä»¥ `.port.ts` æˆ– `.adapter.ts` çµå°¾
13. å…ƒä»¶æª”æ¡ˆå¿…é ˆä»¥ `.component.ts` çµå°¾
14. æŒ‡ä»¤æª”æ¡ˆå¿…é ˆä»¥ `.directive.ts` çµå°¾
15. ç®¡é“æª”æ¡ˆå¿…é ˆä»¥ `.pipe.ts` çµå°¾
16. æœå‹™æª”æ¡ˆå¿…é ˆä»¥ `.service.ts` çµå°¾
17. æ¨¡çµ„æª”æ¡ˆå¿…é ˆä»¥ `.module.ts` çµå°¾ï¼ˆAngular 21+ å°‘ç”¨ï¼‰
18. è·¯ç”±æª”æ¡ˆå¿…é ˆä»¥ `.routes.ts` çµå°¾
19. SignalStore æª”æ¡ˆå¿…é ˆä»¥ `.store.ts` çµå°¾
20. DTO æª”æ¡ˆå¿…é ˆä»¥ `.dto.ts` çµå°¾
21. è½‰æ›å™¨æª”æ¡ˆå¿…é ˆä»¥ `.mapper.ts` çµå°¾
22. ä¾‹å¤–æª”æ¡ˆå¿…é ˆä»¥ `.exception.ts` æˆ– `.error.ts` çµå°¾
23. å·¥å…·æª”æ¡ˆå¿…é ˆä»¥ `.util.ts` æˆ– `.helper.ts` çµå°¾
24. æ¨£å¼æª”æ¡ˆå¿…é ˆä»¥ `.scss` æˆ– `.css` çµå°¾
25. é…ç½®æª”æ¡ˆå¿…é ˆä»¥ `.config.ts` çµå°¾
26. è³‡æºå®šç¾©æª”æ¡ˆå¿…é ˆä»¥ `.assets.ts` çµå°¾

**å¸¸è¦‹ role ç¸½çµ**:

- `.component.ts`ï¼šUI
- `.service.ts`ï¼šé‚è¼¯ / ç‹€æ…‹æ“ä½œ
- `.store.ts`ï¼šç‹€æ…‹å®¹å™¨
- `.facade.ts`ï¼šå°å¤–çµ±ä¸€å…¥å£
- `.api.ts`ï¼šHTTP / Backend
- `.adapter.ts`ï¼šå¤–éƒ¨è½‰æ›å±¤
- `.model.ts`ï¼šå‹åˆ¥å®šç¾©
- `.util.ts`ï¼šç´”å·¥å…·å‡½æ•¸
- `.guard.ts`ï¼šè·¯ç”±å®ˆè¡›
- `.handler.ts`ï¼šäº‹ä»¶è™•ç†å™¨
- `.use-case.ts`ï¼šæ‡‰ç”¨ç”¨ä¾‹

---

## IV. ç¨‹å¼ç¢¼å¯¦é«”è¦å‰‡ï¼ˆ11æ¢ï¼‰

### é¡åˆ¥å‘½å

27. æ‰€æœ‰é¡åˆ¥å¿…é ˆä½¿ç”¨ PascalCase å‘½å

- âœ… æ­£ç¢ºï¼š`export class TaskAggregate { ... }`
- âŒ éŒ¯èª¤ï¼š`export class taskAggregate { ... }`

### ä»‹é¢å‘½å

28. æ‰€æœ‰ä»‹é¢å¿…é ˆä½¿ç”¨ PascalCase å‘½åï¼Œç¦æ­¢ä½¿ç”¨ `I` å‰ç¶´

- âœ… æ­£ç¢ºï¼š`export interface TaskProps { ... }`
- âŒ éŒ¯èª¤ï¼š`export interface ITaskProps { ... }`

29. å±¬æ€§ä»‹é¢å¿…é ˆä½¿ç”¨ `[Name]Props` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`TaskProps`ã€`UserProps`

30. å­˜å„²åº«/åŸ ä»‹é¢å¿…é ˆä½¿ç”¨ `[Name]Repository` æˆ– `[Name]Port` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`TaskRepository`ã€`NotificationPort`

### å‹åˆ¥èˆ‡åˆ—èˆ‰

31. æ‰€æœ‰å‹åˆ¥å¿…é ˆä½¿ç”¨ PascalCase å‘½å

- âœ… æ­£ç¢ºï¼š`export type TaskStatusValue = 'draft' | 'completed';`

32. æ‰€æœ‰åˆ—èˆ‰å¿…é ˆä½¿ç”¨ PascalCase å‘½å

- âœ… æ­£ç¢ºï¼š`export enum DependencyType { ... }`

### å‡½æ•¸èˆ‡æ–¹æ³•

33. æ‰€æœ‰å‡½æ•¸/æ–¹æ³•å¿…é ˆä½¿ç”¨ camelCase å‘½åï¼Œä¸”å¿…é ˆä»¥å‹•è©é–‹é ­

- âœ… æ­£ç¢ºï¼š`calculateEffectiveValue()`ã€`isTerminal()`ã€`createNew()`
- âŒ éŒ¯èª¤ï¼š`CalculateValue()`ã€`terminal()`ã€`newTask()`

### å±¬æ€§èˆ‡æˆå“¡

34. æ‰€æœ‰å±¬æ€§/æˆå“¡å¿…é ˆä½¿ç”¨ camelCase å‘½å

- âœ… æ­£ç¢ºï¼š`private readonly amountInCents: number;`

35. ç§æœ‰æˆå“¡å»ºè­°ä¸ä½¿ç”¨åº•ç·šå‰ç¶´ï¼Œé™¤éæœ‰ getter/setter è¡çª

- âœ… å»ºè­°ï¼š`private taskId: string;`
- âš ï¸ ç‰¹æ®Šæƒ…æ³ï¼š`private _value: number;` (ç•¶æœ‰ `get value()` æ™‚)

### è®Šæ•¸èˆ‡å¸¸æ•¸

36. æ‰€æœ‰è®Šæ•¸å¿…é ˆä½¿ç”¨ camelCase å‘½å

- âœ… æ­£ç¢ºï¼š`const taskCount = 10;`

37. æ‰€æœ‰å¸¸æ•¸å¿…é ˆä½¿ç”¨ SCREAMING_SNAKE_CASE å‘½å

- âœ… æ­£ç¢ºï¼š`export const MAX_RETRY_ATTEMPTS = 3;`

---

## V. é ˜åŸŸç‰¹å®šè¦å‰‡ï¼ˆ2æ¢ï¼‰

### äº‹ä»¶å‘½å

38. äº‹ä»¶é¡å‹å®šç¾©å¿…é ˆä½¿ç”¨ `capability.entity.action` æ ¼å¼ï¼ˆå°å¯«é»è™Ÿåˆ†éš”ï¼‰

- âœ… æ­£ç¢ºï¼š`'tasks.task.created'`ã€`'members.user.registered'`

39. äº‹ä»¶é¡åˆ¥å¿…é ˆä½¿ç”¨ PascalCase + `Event` å‘½å

- âœ… æ­£ç¢ºï¼š`TaskCreatedEvent`ã€`UserRegisteredEvent`

---

## VI. Angular 21+ ç‰¹è‰²è¦å‰‡ï¼ˆ6æ¢ï¼‰

### Signals

46. Signal è®Šæ•¸åç¨±ç¦æ­¢ä½¿ç”¨ `$` å¾Œç¶´

- âœ… æ­£ç¢ºï¼š`const taskCount = signal(0);`
- âŒ éŒ¯èª¤ï¼š`const taskCount$ = signal(0);`

### æ¨¡æ¿æ§åˆ¶æµ

47. `@for` è¿­ä»£è®Šæ•¸å¿…é ˆä½¿ç”¨å–®æ•¸å‹

- âœ… æ­£ç¢ºï¼š`@for (task of tasks(); track task.id) { ... }`
- âŒ éŒ¯èª¤ï¼š`@for (t of tasks(); track t.id) { ... }`

### æŒ‡ä»¤

48. Directive çš„ selector å¿…é ˆä½¿ç”¨ camelCaseï¼Œé€šå¸¸ä»¥ `app` æˆ–èƒ½åŠ›åç¨±ç‚ºå‰ç¶´

- âœ… æ­£ç¢ºï¼š`[appDebounceClick]`ã€`[tasksHighlight]`

### ç®¡é“

49. Pipe é¡åˆ¥å¿…é ˆä½¿ç”¨ PascalCase + `Pipe` å‘½å

- âœ… æ­£ç¢ºï¼š`export class DateToRelativePipe { ... }`

50. Pipe åç¨±å¿…é ˆä½¿ç”¨ camelCase å‘½å

- âœ… æ­£ç¢ºï¼š`{{ date | dateToRelative }}`

51. æ¨¡æ¿å¿…é ˆä½¿ç”¨ Angular 21 æ–°æ§åˆ¶æµèªæ³•ï¼Œç¦æ­¢ä½¿ç”¨èˆŠç‰ˆçµæ§‹å‹æŒ‡ä»¤

- âœ… æ­£ç¢ºï¼š`@if (condition) { ... }`ã€`@for (item of items; track item.id) { ... }`
- âŒ ç¦æ­¢ï¼š`*ngIf="condition"`ã€`*ngFor="let item of items"`

---

## VII. éåŒæ­¥èˆ‡ä¸²æµè¦å‰‡ï¼ˆ3æ¢ï¼‰

### Observable

58. RxJS Observable è®Šæ•¸å¿…é ˆä½¿ç”¨ `$` å¾Œç¶´ï¼ˆåƒ…é™é UI å±¤ï¼‰

- âœ… æ­£ç¢ºï¼š`const taskAdded$ = this.actions$.pipe(...)`
- âŒ éŒ¯èª¤ï¼ˆUIå±¤ï¼‰ï¼š`const tasks$ = signal([]);`

### Promise

59. Promise/UseCase å‡½æ•¸ç¦æ­¢ä½¿ç”¨ `Async` å¾Œç¶´ï¼Œé€éè¿”å› `Promise<T>` è¡¨é”éåŒæ­¥

- âœ… æ­£ç¢ºï¼š`execute(): Promise<void>`
- âŒ éŒ¯èª¤ï¼š`executeAsync(): Promise<void>`

### åˆ—è¡¨è™•ç†

60. è¤‡æ•¸è³‡æ–™å¿…é ˆä½¿ç”¨ `s` å¾Œç¶´æˆ– `List` å­—ä¸²

- âœ… æ­£ç¢ºï¼š`tasks`ã€`taskList`ã€`users`
- âŒ éŒ¯èª¤ï¼š`task` (ç•¶å¯¦éš›æ˜¯é™£åˆ—æ™‚)

---

## VIII. Functions å±¤ç´šè¦å‰‡ï¼ˆæ–°å¢ï¼‰

### Functions å°ˆç”¨å‘½åè¦å‰‡

66. Firebase Cloud Functions å¿…é ˆä½¿ç”¨ camelCase å‘½å

- âœ… æ­£ç¢ºï¼š`export const processDocumentAI = onCall(...)`
- âŒ éŒ¯èª¤ï¼š`export const ProcessDocumentAI = onCall(...)`

67. HTTPS Callable Functions å¿…é ˆä»¥æ¥­å‹™å‹•è©é–‹é ­

- âœ… æ­£ç¢ºï¼š`analyzeDocument`, `generateReport`, `calculateBudget`
- âŒ éŒ¯èª¤ï¼š`documentAnalysis`, `reportGeneration`

68. Function æª”æ¡ˆå¿…é ˆä½¿ç”¨ `[name].function.ts` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`analyze-document.function.ts`

69. Function Handler å¿…é ˆä½¿ç”¨ `[name].handler.ts` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`document-analysis.handler.ts`

### Firestore å‘½åè¦å‰‡

70. Firestore Collection åç¨±å¿…é ˆä½¿ç”¨ kebab-case è¤‡æ•¸å‹

- âœ… æ­£ç¢ºï¼š`workspaces`, `daily-entries`, `audit-logs`
- âŒ éŒ¯èª¤ï¼š`Workspace`, `dailyEntry`

71. Firestore Document ID å»ºè­°ä½¿ç”¨ UUID æˆ–èªç¾©åŒ– ID

- âœ… æ­£ç¢ºï¼š`uuid()`, `user-${userId}-task-${timestamp}`
- âš ï¸ é¿å…ï¼šè‡ªå‹•ç”Ÿæˆçš„éš¨æ©Ÿ IDï¼ˆé™¤éç„¡æ›¿ä»£æ–¹æ¡ˆï¼‰

### Git å‘½åè¦å‰‡ï¼ˆæ–°å¢ï¼‰

72. Git Branch å¿…é ˆä½¿ç”¨ `type/description` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`feature/add-document-ai`, `fix/login-error`, `refactor/remove-template-core`
- âŒ éŒ¯èª¤ï¼š`my-branch`, `test123`

73. Git Commit Message å¿…é ˆä½¿ç”¨ç¥ˆä½¿å¥ï¼Œç°¡æ½”æè¿°

- âœ… æ­£ç¢ºï¼š`Add Document AI integration`, `Fix login validation bug`
- âŒ éŒ¯èª¤ï¼š`Added stuff`, `Fixed things`, `Updates`

74. Pull Request Title å¿…é ˆæ¸…æ™°æè¿°è®Šæ›´ç›®çš„

- âœ… æ­£ç¢ºï¼š`Resolve 103 ESLint violations via targeted suppressions`
- âŒ éŒ¯èª¤ï¼š`PR`, `Updates`, `Fix`

### ç’°å¢ƒè®Šæ•¸å‘½åè¦å‰‡

75. ç’°å¢ƒè®Šæ•¸å¿…é ˆä½¿ç”¨ SCREAMING_SNAKE_CASEï¼Œä¸¦åŠ ä¸Šå‰ç¶´å€åˆ†

- âœ… æ­£ç¢ºï¼š`FIREBASE_API_KEY`, `PROD_DATABASE_URL`, `DEV_API_ENDPOINT`
- âŒ éŒ¯èª¤ï¼š`apiKey`, `databaseUrl`

---

## IX. ç‹€æ…‹ç®¡ç†è¦å‰‡ï¼ˆ3æ¢ï¼‰

### Store

52. Store å¿…é ˆä½¿ç”¨ PascalCase + `Store` å‘½å

- âœ… æ­£ç¢ºï¼š`export const TaskStore = signalStore(...)`

### State

53. State çµæ§‹å®šç¾©å¿…é ˆä½¿ç”¨ `[Name]State` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`export interface TasksState { ... }`

### Projection

54. Projection æª”æ¡ˆå¿…é ˆä½¿ç”¨ `[name].projection.ts` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`task.projection.ts`

---

## X. æ•´åˆå±¤èˆ‡éŒ¯èª¤è™•ç†è¦å‰‡ï¼ˆ3æ¢ï¼‰

### DTO

55. DTO é¡åˆ¥/å‹åˆ¥å¿…é ˆä½¿ç”¨ `[Name]Dto` æˆ– `[Name]Response`/`[Name]Request` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`TaskDto`ã€`CreateTaskRequest`ã€`TaskResponse`

### Mapper

56. Mapper é¡åˆ¥å¿…é ˆä½¿ç”¨ `[Name]Mapper` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`export class TaskMapper { ... }`

### Exception

57. Exception é¡åˆ¥å¿…é ˆä½¿ç”¨ PascalCase + `Exception` æˆ– `Error` å‘½å

- âœ… æ­£ç¢ºï¼š`TaskNotFoundException`ã€`InvalidTaskStateError`

---

## XI. Web èˆ‡ç³»çµ±è¨­è¨ˆè¦å‰‡ï¼ˆ3æ¢ï¼‰

### è³‡æºæª”æ¡ˆ

40. æ‰€æœ‰è³‡æºæª”æ¡ˆå¿…é ˆä½¿ç”¨ kebab-case å‘½å

- âœ… æ­£ç¢ºï¼š`logo-black-tortoise.svg`ã€`background-forest.jpg`

### è·¯ç”±èˆ‡ URL

41. æ‰€æœ‰è·¯ç”±/URL è·¯å¾‘å¿…é ˆä½¿ç”¨ kebab-case å‘½å

- âœ… æ­£ç¢ºï¼š`/workspaces/123/tasks/daily-view`

### ç’°å¢ƒè®Šæ•¸

42. æ‰€æœ‰ç’°å¢ƒè®Šæ•¸å¿…é ˆä½¿ç”¨ SCREAMING_SNAKE_CASE å‘½å

- âœ… æ­£ç¢ºï¼š`FIREBASE_API_KEY`ã€`PRODUCTION_MODE`

---

## XII. æ¸¬è©¦èˆ‡æ–‡ä»¶è¦å‰‡ï¼ˆ3æ¢ï¼‰

### æ¸¬è©¦æª”æ¡ˆ

43. æ¸¬è©¦æª”æ¡ˆå¿…é ˆä½¿ç”¨ `original-name.spec.ts` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`task-id.vo.spec.ts`ã€`task.aggregate.spec.ts`

### æ–‡ä»¶æª”æ¡ˆ

44. æ ¸å¿ƒæ–‡ä»¶å¿…é ˆä½¿ç”¨ SCREAMING_SNAKE_CASE.md æ ¼å¼ï¼ˆREADME.md èˆ‡ AGENTS.md ç‚ºå›ºå®šæ ¼å¼ä¹‹ä¾‹å¤–ï¼‰

- âœ… æ­£ç¢ºï¼š`README.md`ã€`AGENTS.md`ã€`ARCHITECTURE_GATE.md`

45. ä¸€èˆ¬æ–‡ä»¶å¯ä½¿ç”¨ kebab-case.md æ ¼å¼

- âœ… æ­£ç¢ºï¼š`audit-tasks.md`ã€`deployment-guide.md`

---

## XIII. CSS/SCSS è¦å‰‡ï¼ˆ3æ¢ï¼‰

### Component æ¨£å¼

61. Component SCSS æª”æ¡ˆå¿…é ˆèˆ‡å…ƒä»¶åŒåï¼Œä½¿ç”¨ `[component].component.scss` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`task-list.component.scss`

### SCSS è®Šæ•¸

62. SCSS è®Šæ•¸å¿…é ˆä½¿ç”¨ kebab-case å‘½å

- âœ… æ­£ç¢ºï¼š`$bt-color-primary-500`ã€`$bt-spacing-md`

### CSS é¡åˆ¥

63. CSS é¡åˆ¥å¿…é ˆéµå¾ª BEM è¦ç¯„ï¼Œä½¿ç”¨ kebab-case å‘½å

- âœ… æ­£ç¢ºï¼š`bt-task-list__item--active`
- æ ¼å¼ï¼š`block__element--modifier`

---

## XIV. äº‹ä»¶å‘½åç©ºé–“è¦å‰‡ï¼ˆ2æ¢ï¼‰

### è·¨æ¨¡çµ„äº‹ä»¶

64. è·¨æ¨¡çµ„äº‹ä»¶å­—ä¸²å¿…é ˆä½¿ç”¨ `[module].[entity].[action]` æ ¼å¼

- âœ… æ­£ç¢ºï¼š`'members.user.registered'`ã€`'tasks.task.completed'`

### å…§éƒ¨äº‹ä»¶

65. å…§éƒ¨äº‹ä»¶å¯çœç•¥å‰ç¶´ä½†å»ºè­°ä¿æŒä¸€è‡´

- âœ… å»ºè­°ï¼š`'tasks.task.updated'` (å³ä½¿åœ¨ tasks æ¨¡çµ„å…§éƒ¨)
- âš ï¸ å¯æ¥å—ï¼š`'task.updated'` (åƒ…é™æ¨¡çµ„å…§éƒ¨ä½¿ç”¨)

---

## XV. å¸¸è¦‹å ´æ™¯ç¤ºä¾‹

### å ´æ™¯ 1: æ–°å¢ä¸€å€‹ä»»å‹™ç‹€æ…‹æª¢æŸ¥åŠŸèƒ½

**å•**: è¦æ”¾åœ¨å“ªï¼Ÿ

- æª¢æŸ¥ã€Œèƒ½ä¸èƒ½ã€â†’ `capabilitys/tasks/`

**å‘½å**:

```typescript
// âœ… æ­£ç¢º
export function canEditTask(task: Task, user: User): boolean {
  return task.assigneeId === user.id && task.status !== 'completed';
}

// âŒ éŒ¯èª¤
export function editTask(task: Task): void { ... }  // é€™æ˜¯ actionï¼Œä¸æ˜¯ capability
```

---

### å ´æ™¯ 2: å‘¼å« Document AI åˆ†ææ–‡ä»¶

**å•**: Browser é‚„æ˜¯ Serverï¼Ÿ

- Document AI = Google Cloud API = éœ€è¦æå‡æ¬Šé™ â†’ **Server (functions/)**

**ç¦æ­¢**:

```typescript
// âŒ çµ•å°ç¦æ­¢åœ¨ src/app/integration/
import { DocumentAIService } from '@google-cloud/documentai'; // Server SDK ä¸èƒ½ç”¨åœ¨ Browser
```

**æ­£ç¢º**:

```typescript
// âœ… æ­£ç¢ºï¼šåœ¨ functions/src/
import { DocumentAIService } from '@google-cloud/documentai';

export const analyzeDocument = onCall(async (request) => {
  const client = new DocumentAIService();
  // ...
});
```

```typescript
// âœ… æ­£ç¢ºï¼šåœ¨ src/app/integration/remote/
export class DocumentAIRemote {
  callAnalyzeDocument(file: File): Promise<AnalysisResult> {
    return this.functions.httpsCallable('analyzeDocument')({ file });
  }
}
```

---

### å ´æ™¯ 3: å…±ç”¨çš„æ—¥æœŸæ ¼å¼åŒ–å‡½æ•¸

**å•**: èˆ‡æ¥­å‹™ç›¸é—œå—ï¼Ÿ

- å¦ â†’ `shared/`

**å•**: ä½¿ç”¨å¤–éƒ¨ SDK å—ï¼Ÿ

- å¦ â†’ âœ… å¯ä»¥æ”¾åœ¨ `shared/`

**å‘½å**:

```typescript
// âœ… æ­£ç¢ºï¼šshared/utils/date.util.ts
export function formatDate(date: Date, format: string): string {
  // Pure function, no external dependencies
}

// âŒ éŒ¯èª¤ï¼šå¦‚æœä½¿ç”¨äº† moment.js æˆ–å…¶ä»–å¤–éƒ¨åº«
import moment from 'moment'; // é€™æœƒè®“ shared/ ä¸ç´”
```

---

## XVI. ç¸½çµ

### è¦å‰‡çµ±è¨ˆ

æœ¬è¦ç¯„å…±åŒ…å« **75 æ¢æ˜ç¢ºè¦å‰‡**ï¼Œæ¶µè“‹ï¼š

- æ ¸å¿ƒåŸå‰‡ï¼š4 æ¢
- èªæ„æ±ºç­–æ¨¹ï¼šæ–°å¢ï¼ˆæ”¾ç½®æŒ‡å¼•ï¼‰
- ç›®éŒ„èˆ‡æª”æ¡ˆï¼š22 æ¢
- ç¨‹å¼ç¢¼å¯¦é«”ï¼š11 æ¢
- é ˜åŸŸç‰¹å®šï¼š2 æ¢
- Angular 21+ï¼š6 æ¢
- éåŒæ­¥ä¸²æµï¼š3 æ¢
- Functions å±¤ç´šï¼šæ–°å¢ 10 æ¢ï¼ˆ66-75ï¼‰
- ç‹€æ…‹ç®¡ç†ï¼š3 æ¢
- æ•´åˆå±¤ï¼š3 æ¢
- Web èˆ‡ç³»çµ±ï¼š3 æ¢
- æ¸¬è©¦èˆ‡æ–‡ä»¶ï¼š3 æ¢
- CSS/SCSSï¼š3 æ¢
- äº‹ä»¶å‘½åç©ºé–“ï¼š2 æ¢

### æ–°å¢å…§å®¹ï¼ˆv2.0 Enhancedï¼‰

1. âœ… **èªæ„æ±ºç­–æ¨¹** - å¿«é€Ÿæ±ºå®šä»£ç¢¼æ”¾ç½®ä½ç½®
2. âœ… **å±¤ç´šæŠ€è¡“ç´„æŸ** - shared vs integration vs functions çš„ SDK è¦å‰‡
3. âœ… **Functions å‘½åè¦å‰‡** - Firebase Cloud Functionsã€Callable Functions
4. âœ… **Firestore å‘½åè¦å‰‡** - Collectionã€Document ID è¦ç¯„
5. âœ… **Git å‘½åè¦å‰‡** - Branchã€Commitã€PR è¦ç¯„
6. âœ… **å¸¸è¦‹å ´æ™¯ç¤ºä¾‹** - å¯¦éš›æ‡‰ç”¨æ¡ˆä¾‹
7. âœ… **å¿«é€Ÿæ±ºç­–æŒ‡å—** - é–‹å§‹å‰çš„ä¸‰å€‹å•é¡Œ
8. âœ… **è¦–è¦ºåŒ–æ±ºç­–æµç¨‹** - æ–‡å­—ç‰ˆæµç¨‹åœ–

### ç‚ºä»€éº¼é€™å€‹ç‰ˆæœ¬æœ€ä½³åŒ– Copilot Browser Agentï¼Ÿ

1. **å–®ä¸€çœŸç›¸ä¾†æº** - ä¸å†æœ‰å…©ä»½è¡çªçš„æ–‡ä»¶
2. **æ ¼å¼ + èªæ„** - åŒæ™‚å›ç­”ã€Œæ€éº¼å‘½åã€å’Œã€Œæ”¾åœ¨å“ªã€
3. **å¿«é€ŸæŸ¥è©¢** - æŒ‰ä»»å‹™ã€æŒ‰æ ¼å¼ã€æŒ‰å ´æ™¯éƒ½èƒ½å¿«é€Ÿæ‰¾åˆ°è¦å‰‡
4. **æ±ºç­–æ¨¹** - è¦–è¦ºåŒ–çš„æ”¾ç½®é‚è¼¯ï¼Œæ¸›å°‘èªçŸ¥è² æ“”
5. **å¯¦ä¾‹è±å¯Œ** - æ¯æ¢è¦å‰‡éƒ½æœ‰ âœ… å’Œ âŒ ç¯„ä¾‹
6. **å®Œæ•´è¦†è“‹** - Frontend + Backend + Git + Firestore å…¨åŒ…å«
7. **å„ªå…ˆç´šæ¨™è¨˜** - `priority: 1` å‘Šè¨´ Copilot é€™æ˜¯æœ€é‡è¦çš„è¦ç¯„

---

## XVII. å¿«é€ŸæŸ¥è©¢ç´¢å¼•ï¼ˆæ›´æ–°ï¼‰

### æŒ‰å‘½åæ ¼å¼æŸ¥è©¢

- **PascalCase**: é¡åˆ¥(27)ã€ä»‹é¢(28)ã€å‹åˆ¥(31)ã€åˆ—èˆ‰(32)ã€Store(52)ã€DTO(55)ã€Mapper(56)ã€Exception(57)
- **camelCase**: å‡½æ•¸/æ–¹æ³•(33)ã€å±¬æ€§(34)ã€è®Šæ•¸(36)ã€Directive selector(48)ã€Pipeåç¨±(50)ã€Functions(66)
- **kebab-case**: è³‡æ–™å¤¾(5)ã€æª”æ¡ˆ(6)ã€è³‡æº(40)ã€è·¯ç”±(41)ã€SCSSè®Šæ•¸(62)ã€CSSé¡åˆ¥(63)ã€Firestore Collection(70)ã€Git Branch(72)
- **SCREAMING_SNAKE_CASE**: å¸¸æ•¸(37)ã€ç’°å¢ƒè®Šæ•¸(42, 75)ã€æ ¸å¿ƒæ–‡ä»¶(44)

### æŒ‰æª”æ¡ˆé¡å‹æŸ¥è©¢

- **é ˜åŸŸå±¤**: .vo.ts(7)ã€.entity.ts(8)ã€.aggregate.ts(9)ã€.factory.ts(10)ã€.repository.ts(11)
- **æ‡‰ç”¨å±¤**: .port.ts(12)ã€.adapter.ts(12)ã€.service.ts(16)ã€.store.ts(19)ã€.handler.tsã€.use-case.ts
- **å±•ç¤ºå±¤**: .component.ts(13)ã€.directive.ts(14)ã€.pipe.ts(15)
- **åŸºç¤è¨­æ–½**: .dto.ts(20)ã€.mapper.ts(21)ã€.exception.ts(22)ã€.config.ts(25)
- **Functions**: .function.ts(68)ã€.handler.ts(69)

### æŒ‰å±¤ç´šæŸ¥è©¢

- **Frontend (Browser)**:
  - `shared/`: ç´” TypeScriptï¼Œé›¶ä¾è³´
  - `integration/`: @angular/fire å®¢æˆ¶ç«¯ SDK
  - `capabilitys/`: èƒ½åŠ›åˆ¤æ–·ï¼ˆå¸ƒæ—å‡½æ•¸ï¼‰
  - `workflows/`: å®Œæ•´ä½¿ç”¨è€…æµç¨‹

- **Backend (Node.js)**:
  - `functions/`: firebase-admin, @google-cloud/\*
  - ä¸èƒ½ import ä»»ä½• `src/app/*` çš„ä»£ç¢¼

---

**ç‰ˆæ¬Šè²æ˜**: æœ¬è¦ç¯„ç‚º Black-Tortoise å°ˆæ¡ˆå°ˆç”¨ï¼Œéµå¾ª DDD èˆ‡ Angular 21+ æœ€ä½³å¯¦è¸ã€‚
**å„ªåŒ–ç‰ˆæœ¬**: v2.0 Enhanced for Copilot Browser Agent
**ä¸Šä¸€ç‰ˆæœ¬**: 99-naming-rules-copilot-instructions.md (v1.0)
**æ•´åˆè‡ª**: naming-copilot-instructions.md (èªæ„æŒ‡å¼•)
