---

# DDD å±¤ç´šé‚Šç•Œæª¢æŸ¥è¦ç¯„

æœ¬æ–‡ä»¶å®šç¾©åŸºæ–¼ `General Standard DDD.md` çš„ 8 å±¤æž¶æ§‹é‚Šç•Œæª¢æŸ¥æ¨™æº–ã€‚

---

# ðŸ† å±¤ç´šå®šä½èˆ‡è·è²¬

| å±¤ç´š              | è·è²¬                          | æ‰€æœ‰è€…                    |
| ----------------- | ----------------------------- | --------------------------- |
| app/core          | æŠ€è¡“åˆå§‹åŒ–èˆ‡åŸºç¤Žè¨­æ–½          | æ¡†æž¶åœ˜éšŠ                    |
| app/domain        | ç´”æ¥­å‹™é‚è¼¯èˆ‡é ˜åŸŸè¦å‰‡          | é ˜åŸŸå°ˆå®¶                    |
| app/application   | ç”¨ä¾‹å”èª¿èˆ‡æ¥­å‹™æµç¨‹ç·¨æŽ’        | æ‡‰ç”¨å±¤æ‰€æœ‰è€…                |
| app/infrastructure| æŠ€è¡“å¯¦ä½œèˆ‡å¤–éƒ¨ç³»çµ±é©é…        | åŸºç¤Žè¨­æ–½åœ˜éšŠ                |
| app/features      | UI çµ„è£èˆ‡ç”¨æˆ¶äº’å‹•             | å‰ç«¯/ç‰¹æ€§åœ˜éšŠ               |
| app/shared        | UI é€šç”¨å…ƒä»¶èˆ‡å·¥å…·             | å‰ç«¯åŸºç¤Žè¨­æ–½                |
| shared-kernel     | è·¨å±¤å…±äº«åž‹åˆ¥èˆ‡å¸¸é‡            | æž¶æ§‹å§”å“¡æœƒ                  |
| functions         | å¾Œç«¯ç„¡ä¼ºæœå™¨æ¥­å‹™é‚è¼¯          | å¾Œç«¯åœ˜éšŠ                    |

---

# ðŸ”’ Import é‚Šç•Œè¦å‰‡ï¼ˆåŸºæ–¼ DDD å±¤ç´šï¼‰

## åªå…è¨±é€éŽ index.ts çš„ public API

### âœ… å…è¨±çš„ import

```ts
// å¾žå±¤ç´šæ ¹åŒ¯å…¥
import { TaskAggregate } from '@app/domain/tasks';
import { CreateTaskUseCase } from '@app/application/tasks';
import { TasksRepository } from '@app/infrastructure/persistence';
import { TaskFormComponent } from '@app/features/tasks';

// åŒ¯å…¥åž‹åˆ¥èˆ‡å¸¸é‡
import { TaskStatus, TASK_PRIORITY_LEVELS } from '@shared-kernel/constants';
```

### âŒ ç¦æ­¢çš„ import

```ts
// ä¸å…è¨± deep importï¼ˆå…§éƒ¨è³‡æ–™å¤¾ï¼‰
import { TaskAggregate } from '@app/domain/tasks/aggregates/task.aggregate';
import { TaskPersistenceRepository } from '@app/infrastructure/persistence/repositories/task';
import { TaskFormComponent } from '@app/features/tasks/components/form';

// ä¸å…è¨±è·¨å±¤ç›´æŽ¥å¼•ç”¨
import { HttpClient } from '@angular/common/http'; // æ‡‰ä½¿ç”¨ app/core æä¾›çš„
import { Firebase } from '@angular/fire'; // æ‡‰ä½¿ç”¨ app/infrastructure
```

## è¦å‰‡å¥

> **åƒ…å…è¨±é€éŽå±¤ç´šæ ¹çš„ index.ts åŒ¯å‡º public APIï¼›ç¦æ­¢ deep import ä»»ä½• `/domain`, `/application`, `/infrastructure` å…§éƒ¨è·¯å¾‘ã€‚**

---

# ðŸŽ¯ app/domain è·è²¬é‚Šç•Œ

app/domain åªå¯ä»¥è² è²¬ï¼š

- èšåˆæ ¹ï¼ˆAggregatesï¼‰èˆ‡å¯¦é«”ï¼ˆEntitiesï¼‰
- å€¼å°è±¡ï¼ˆValue Objectsï¼‰èˆ‡ä¸è®Šæ€§è¦å‰‡
- é ˜åŸŸæœå‹™ï¼ˆDomain Servicesï¼‰èˆ‡æ¥­å‹™é‚è¼¯
- é ˜åŸŸäº‹ä»¶ï¼ˆDomain Eventsï¼‰å®šç¾©
- å€‰å„²ä»‹é¢å®šç¾©ï¼ˆRepository Interfacesï¼‰

app/domain ä¸å¯ä»¥è² è²¬ï¼š

- HTTP æˆ– Firebase å‘¼å«
- ä¾è³´æ³¨å…¥æ¡†æž¶é‚è¼¯
- UI ç‹€æ…‹ç®¡ç†
- å¤–éƒ¨ç³»çµ±é©é…

è¦å‰‡å¥ï¼š
> app/domain æ˜¯æ¥­å‹™æ ¸å¿ƒï¼Œå¿…é ˆæ¡†æž¶ç„¡é—œã€å¯å®Œå…¨éš”é›¢æ¸¬è©¦ã€‚

---

# ðŸ” è·¨å±¤æºé€šè¦å‰‡

å…è¨±çš„æºé€šæ–¹å¼ï¼š

- **features â†’ application** é€éŽ use-cases æˆ– commands/queries
- **application â†’ domain** ç›´æŽ¥å‘¼å«æ¥­å‹™é‚è¼¯
- **application â†’ infrastructure** é€éŽ dependency injection
- **è·¨å±¤** é€éŽ domain eventsï¼ˆäº‹ä»¶é©…å‹•ï¼‰

ç¦æ­¢çš„æºé€šæ–¹å¼ï¼š

- âŒ features ç›´æŽ¥å‘¼å« domain
- âŒ domain å‘¼å« application æˆ– infrastructure
- âŒ infrastructure å®šç¾©æ¥­å‹™è¦å‰‡
- âŒ ç›´æŽ¥å­˜å–ä»–å±¤çš„ internal è³‡æ–™å¤¾

è¦å‰‡å¥ï¼š
> åªé€éŽ application å±¤å”èª¿ï¼›è·¨å±¤ä½¿ç”¨ eventsï¼›ç¦æ­¢ deep importã€‚

---

# ï¿½ æ¸¬è©¦é‚Šç•Œè¦å‰‡ï¼ˆæŒ‰å±¤ç´šï¼‰

- **app/domain æ¸¬è©¦** å¿…é ˆå¯å®Œå…¨éš”é›¢åŸ·è¡Œï¼Œ100% ç„¡æ¡†æž¶
- **app/application æ¸¬è©¦** éœ€ mock app/infrastructure
- **app/features æ¸¬è©¦** éœ€ mock app/applicationï¼ˆä½¿ç”¨ Jestã€Jasmineï¼‰
- **app/infrastructure æ¸¬è©¦** éœ€ä½¿ç”¨çœŸå¯¦ Firebase æˆ– Firestore emulator
- **ä¸å…è¨±è·¨å±¤æ•´åˆæ¸¬è©¦**ï¼ˆæ‡‰ä½¿ç”¨ e2e æ¸¬è©¦æ¶µè“‹ï¼‰

è¦å‰‡å¥ï¼š
> å–®å…ƒæ¸¬è©¦æŒ‰å±¤ç´šéš”é›¢ï¼›é›†æˆèˆ‡ e2e æ¸¬è©¦æ¶µè“‹è·¨å±¤å ´æ™¯ã€‚

---

# ðŸ›£ï¸ è·¯ç”±é‚Šç•Œè¦å‰‡ï¼ˆAngular Routeï¼‰

- app/core è¨­å®šå…¨åŸŸè·¯ç”±èˆ‡æ””æˆªå™¨
- app/features å®šç¾© feature ç´š lazy routes
- è·¯ç”±åƒæ•¸é€éŽ resolver æ³¨å…¥ï¼ˆä¸ç›´æŽ¥åœ¨ component è§£æžï¼‰
- è·¯ç”±è®Šæ›´ä¸å¾—ç›´æŽ¥è§¸ç™¼æ¥­å‹™é‚è¼¯ï¼ˆæ‡‰ä½¿ç”¨ app/applicationï¼‰

è¦å‰‡å¥ï¼š
> è·¯ç”±å±¬æ–¼ app/coreï¼Œlazy loading å±¬æ–¼ app/featuresï¼Œæ¥­å‹™é‚è¼¯å±¬æ–¼ app/applicationã€‚

---

# ðŸ” é‚Šç•Œé•è¦æª¢æŸ¥æ¸…å–®

åœ¨é€²è¡Œ code review æ™‚ï¼Œæª¢æŸ¥ä»¥ä¸‹é‚Šç•Œé•è¦ï¼š

- [ ] app/domain åŒ…å« Angularã€Firebaseã€HTTP å°Žå…¥ï¼Ÿ
- [ ] app/features ç›´æŽ¥å‘¼å« app/infrastructureï¼Ÿ
- [ ] app/application åŒ…å« UI é‚è¼¯æˆ–ç‹€æ…‹ç®¡ç†ï¼Ÿ
- [ ] å­˜åœ¨ deep importï¼ˆå¦‚ `from '@app/domain/tasks/aggregates'`ï¼‰ï¼Ÿ
- [ ] è¿´åœˆä¾è³´ï¼ˆA â†’ B â†’ Aï¼‰ï¼Ÿ
- [ ] app/infrastructure æš´éœ²å¯¦ä½œç´°ç¯€è€Œéžä»‹é¢ï¼Ÿ
- [ ] shared-kernel åŒ…å«æ¡†æž¶ç›¸é—œç¨‹å¼ç¢¼ï¼Ÿ
- [ ] functions åŒ…å« @angular/fire æˆ–ç€è¦½å™¨ APIï¼Ÿ

---

# ðŸ“œ DDD é‚Šç•Œç¸½è¦ç¯„ï¼ˆæ ¸å¿ƒåŽŸå‰‡ï¼‰

> **å±¤ç´šè·è²¬åˆ†æ˜Ž**: æ¯å±¤åªåšè©²å±¤æ‡‰åšçš„äº‹ã€‚
> **å–®å‘ä¾è³´**: é«˜å±¤ä¾è³´ä½Žå±¤ï¼Œä½Žå±¤ä¸çŸ¥é“é«˜å±¤ã€‚  
> **ä»‹é¢éš”é›¢**: è·¨å±¤äº’å‹•åªé€éŽå…¬é–‹ APIï¼Œç¦æ­¢ deep importã€‚
> **äº‹ä»¶é©…å‹•**: è·¨å±¤è§£è€¦ä½¿ç”¨ domain eventsã€‚
> **ç„¡æ¡†æž¶é ˜åŸŸ**: app/domain å¿…é ˆ 100% æ¡†æž¶ç„¡é—œã€‚
````
